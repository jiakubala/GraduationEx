@model List<Graduation.Models.Order>

@{
    ViewData["Title"] = "Shopcarlist";
}

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>购物车页面</title>
    <link rel="stylesheet" href="~/css/base.css" type="text/css" />
    <link rel="stylesheet" href="~/css/shop_common.css" type="text/css" />
    <link rel="stylesheet" href="~/css/shop_header.css" type="text/css" />
    <link rel="stylesheet" href="~/css/shop_gouwuche.css" type="text/css" />
    <script type="text/javascript" src="~/js/jquery.js"></script>
    <script type="text/javascript" src="~/js/topNav.js"></script>
    <script type="text/javascript" src="~/js/jquery.goodnums.js"></script>
    <script type="text/javascript" src="~/js/shop_gouwuche.js"></script>
</head>
<body>
    <!-- Header -->
    <div class="shop_hd">
        <!-- Header TopNav -->
        <div class="shop_hd_topNav">
            <div class="shop_hd_topNav_all">
                <!-- Header TopNav Left -->
                @{var UserName = ViewData["UserName"];}
                @if (UserName == null)
                {
                    <div class="shop_hd_topNav_all_left">
                        <p>
                            您好，欢迎来到
                            <b>
                                <a asp-controller="Index" asp-action="Goodlist">牛牛购物</a>
                            </b>
                            [<a asp-controller="Login" asp-action="Loginin">登录</a>]
                            [<a asp-controller="Login" asp-action="Register">注册</a>]
                        </p>
                    </div>
                }
                else
                {
                    <div class="shop_hd_topNav_all_left">
                        <p>
                            @UserName，欢迎来到
                            <b>
                                <a asp-controller="Index" asp-action="Goodlist">牛牛购物</a>
                            </b>
                            [<a asp-controller="Login" asp-action="Loginout">注销</a>]
                        </p>
                    </div>
                }
                <!-- Header TopNav Left End -->
                <!-- Header TopNav Right -->
                <div class="shop_hd_topNav_all_right">
                    <ul class="topNav_quick_menu">

                        <li>
                            <div class="topNav_menu">
                                <a href="#" class="topNavHover">我的商城<i></i></a>
                                <div class="topNav_menu_bd" style="display:none;">
                                    <ul>
                                        <li><a title="订单信息" asp-controller="Order" asp-action="Orderbuylist">订单信息管理</a></li>
                                        <li><a title="个人主页" asp-controller="User" asp-action="Usermessage">个人主页</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>

                        <li>
                            <div class="topNav_menu">
                                <a href="#" class="topNavHover">我的收藏<i></i></a>
                                <div class="topNav_menu_bd" style="display:none;">
                                    <ul>
                                        <li><a title="收藏的商品" asp-controller="User" asp-action="Userfavorite">收藏的商品</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>

                        <li>
                            <div class="topNav_menu">
                                <a asp-controller="Order" asp-action="Shopcarlist">购物车</a>
                            </div>
                        </li>

                    </ul>
                </div>
                <!-- Header TopNav Right End -->
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
        <!-- Header TopNav End -->
        <!-- TopHeader Center -->
        <div class="shop_hd_header">
            <div class="shop_hd_header_logo">
                <h1 class="logo"><a asp-controller="Index" asp-action="Goodlist"><img src="~/images/logo.png" alt="ShopCZ" /></a><span>ShopCZ</span></h1>
            </div>
            <div class="shop_hd_header_search">
            </div>
        </div>
        <!-- TopHeader Center End -->
        <!-- Header Menu -->
        <div class="shop_hd_menu">
            <!-- 所有商品菜单 -->

            <div id="shop_hd_menu_all_category" class="shop_hd_menu_all_category">
                <!-- 首页去掉 id="shop_hd_menu_all_category" 加上clsss shop_hd_menu_hover -->
                <div class="shop_hd_menu_all_category_title"><h2 title="所有商品分类"><a href="javascript:void(0);">所有商品分类</a></h2><i></i></div>
                <div id="shop_hd_menu_all_category_hd" class="shop_hd_menu_all_category_hd">
                </div>
            </div>
            <!-- 所有商品菜单 END -->
            <!-- 普通导航菜单 -->
            <ul class="shop_hd_menu_nav">
                <li class="current_link"><a asp-controller="Index" asp-action="Goodlist"><span>首页</span></a></li>
                <li class="link"><a asp-controller="Index" asp-action="Goodlist"><span>限时抢购</span></a></li>
                <li class="link"><a asp-controller="Index" asp-action="Goodlist"><span>品牌精选</span></a></li>
                <li class="link"><a asp-controller="Index" asp-action="Goodlist"><span>新品上市</span></a></li>
            </ul>
            <!-- 普通导航菜单 End -->
        </div>
        <!-- Header Menu End -->

    </div>
    <div class="clear"></div>
    <!-- Header End -->
    </div>
    <div class="clear"></div>
    <!-- 面包屑 注意首页没有 -->
    <div class="shop_hd_breadcrumb">
        <strong>当前位置：</strong>
        <span>
            <a asp-controller="Index" asp-action="Goodlist">首页</a>&nbsp;›&nbsp;
            <a>我的商城</a>&nbsp;›&nbsp;
            <a>我的购物车</a>
        </span>
    </div>
    <div class="clear"></div>
    <!-- 面包屑 End -->
    <!-- Header End -->
    <!-- 购物车 Body -->
    <div class="shop_gwc_bd clearfix">
        <!-- 在具体实现的时候，根据情况选择其中一种情况 -->
        @if (Model == null)
        {
            <!-- 购物车为空 -->
            <div class="empty_cart mb10">
                <div class="message">
                    <p>购物车内暂时没有商品，您可以<a href="index.html">去首页</a>挑选喜欢的商品</p>
                </div>
            </div>
            <!-- 购物车为空 end-->
        }
        else
        {
            <!-- 购物车有商品 -->
            <div class="shop_gwc_bd_contents clearfix">
                <!-- 购物流程导航 -->
                <div class="shop_gwc_bd_contents_lc clearfix">
                    <ul>
                        <li class="step_a hover_a">确认购物清单</li>
                        <li class="step_b">确认收货人资料及送货方式</li>
                        <li class="step_c">购买完成</li>
                    </ul>
                </div>
                <!-- 购物流程导航 End -->
                <!-- 购物车列表 -->
                <table>
                    <thead>
                        <tr>
                            <th colspan="2"><span>商品</span></th>
                            <th><span>单价(元)</span></th>
                            <th><span>数量</span></th>
                            <th><span>小计</span></th>
                            <th><span>操作</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        @{int i = 0; decimal zongjia = 0; List<string> orderidlist = new List<string>();}
                        @foreach (var order in Model)
                        {
                            orderidlist.Add(order.OrderId);
                            i++;
                            string j = i + "";
                            var xiaoji = order.Price * order.GoodNumber;
                            zongjia = zongjia + xiaoji;
                            <tr>
                                <td class="gwc_list_pic"><a><img src="~/images/4_7b5239c3f153ae4b67ff760f54408a5b.jpg_tiny.jpg" /></a></td>
                                <td class="gwc_list_title">
                                    <a href="/Index/Goodlistbranchdetails?goodid=@order.GoodId">@order.Name</a>
                                </td>
                                <td class="gwc_list_danjia"><span>￥<strong id="danjia_00 @j">@order.Price</strong></span></td>
                                <td class="gwc_list_shuliang"><span><a class="good_num_jian this_good_nums" did="danjia_00 @j" xid="xiaoji_00 @j" ty="-" valId="goods_00 @j" href="javascript:void(0);">-</a><input type="text" value="@order.GoodNumber" id="goods_00 @j" class="good_nums" /><a href="javascript:void(0);" did="danjia_00 @j" xid="xiaoji_00 @j" ty="+" class="good_num_jia this_good_nums" valId="goods_00 @j">+</a></span></td>
                                <td class="gwc_list_xiaoji"><span>￥<strong id="xiaoji_00 @j" class="good_xiaojis">@xiaoji</strong></span></td>
                                <td class="gwc_list_caozuo">
                                    <form class="shop_good_delete" asp-action="DeleteShopcar" method="post">
                                        <input type="hidden" name="orderid" value="@order.OrderId" />
                                        <input type="submit" value="删除">
                                    </form>
                                </td>
                            </tr>
                        }
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="6">
                                <div class="gwc_foot_zongjia">商品总价<span>￥<strong id="good_zongjia"></strong>@zongjia</span></div>
                                <div class="clear"></div>
                                <div class="gwc_foot_links">
                                    @if (@Model.Count == 0)
                                    {
                                        <a asp-controller="Index" asp-action="Goodlist" class="go">继续购物</a>
                                    }
                                    else
                                    {
                                        <a asp-controller="Index" asp-action="Goodlist" class="go">继续购物</a>
                                        <form asp-action="Shopflow" method="post">
                                            @foreach (var id in orderidlist)
                                            {
                                                <input type="hidden" name="orderidlist" value=@id />
                                            }
                                            <input type="submit" value="确认并填写订单">
                                        </form>
                                    }
                                </div>
                            </td>
                        </tr>
                    </tfoot>
                </table>
                <!-- 购物车列表 End -->
            </div>
            <!-- 购物车有商品 end -->
        }
    </div>
    <!-- 购物车 Body End -->
    <!-- Footer  -->
    <div class="clear"></div>
    <div class="shop_footer">
        <div class="shop_footer_link">
            <p>
                <a href="">首页</a>|
                <a href="">招聘英才</a>|
                <a href="">广告合作</a>|
                <a href="">关于LXSH</a>|
                <a href="">关于我们</a>
            </p>
        </div>
        <div class="shop_footer_copy">
            <p>Copyright 2008-2080 itcast Inc.,All rights reserved.</p>
        </div>
    </div>
    <!-- Footer End -->

</body>
</html>

